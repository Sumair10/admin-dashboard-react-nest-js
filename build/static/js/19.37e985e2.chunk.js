(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1368:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(31),l=(a(4),a(5)),s=a.n(l),i=a(10),o=a(54),m=a(29),d=a(56),u=a(1329),E=a(1330),w=a(802),v=a(803),g=a(804),p=a(1332),N=a(1333),f=a(1334),b=a(1335),h=a(264),O=a.n(h),x=a(68),C=a.n(x),z=(a(674),a(675)),y=a.n(z),j=a(362),k=a(58),S=(a(701),a(50)),T=a(51),I=a(52),R=a(49),B=a(53),F=a(317),P=a.n(F),D=(a(795),a(1297)),_=function(e){var t=e.busNo;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"roundMarker"},c.a.createElement(D.a,{size:"100%",color:"#000"}))),c.a.createElement("div",{className:"busNo"},t))},A=function(e){function t(){return Object(S.a)(this,t),Object(I.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{style:{height:"100%",width:"100%"}},c.a.createElement(P.a,{bootstrapURLKeys:{key:"AIzaSyC5fT2p1N9-zuLa4URmcf2EBwyAURB-TMU"},defaultCenter:this.props.center,defaultZoom:this.props.zoom},this.props.busesLocationArray&&this.props.busesLocationArray.map(function(e,t){return c.a.createElement(_,{key:t,lat:e.location.coords.latitude,lng:e.location.coords.longitude,busNo:e.busNo})})))}}]),t}(n.Component);A.defaultProps={center:{lat:23.588,lng:58.3829},zoom:8};var L=A,M=a(525),Y=a(35),U=Object(m.b)(function(e){return{schoolId:e.auth.user.result.userExist._id,totalBuses:e.auth.totalCountOfCollections&&e.auth.totalCountOfCollections.totalBuses,totalDrivers:e.auth.totalCountOfCollections&&e.auth.totalCountOfCollections.totalDrivers,totalParents:e.auth.totalCountOfCollections&&e.auth.totalCountOfCollections.totalParents,totalRoutes:e.auth.totalCountOfCollections&&e.auth.totalCountOfCollections.totalRoutes,totalStudents:e.auth.totalCountOfCollections&&e.auth.totalCountOfCollections.totalStudents,totalNannies:e.auth.totalCountOfCollections&&e.auth.totalCountOfCollections.totalNannies}},function(e){return{getTotalCountOfCollections:function(t){return e(Object(k.getTotalCountOfCollections)(t))},fetchHistory:function(t){return e(Object(j.a)(t))}}})(function(e){var t=e.getTotalCountOfCollections,a=Object(m.c)(),r=Object(n.useState)(!1),l=Object(o.a)(r,2),h=(l[0],l[1]),x=Object(n.useState)(!1),z=Object(o.a)(x,2),j=z[0],k=z[1],S=Object(m.d)(function(e){return e.notification}),T=Object(m.d)(function(e){return e.auth.user.result.userExist._id}),I=Object(m.d)(function(e){return e.bus.bus}),R=Object(n.useState)([]),B=Object(o.a)(R,2),F=B[0],P=B[1],D=Object(n.useState)([]),_=Object(o.a)(D,2),A=(_[0],_[1]),U=Object(n.useState)([]),H=Object(o.a)(U,2),J=H[0],W=H[1],G=Object(n.useState)(0),K=Object(o.a)(G,2),Z=K[0],$=K[1],q=Object(n.useState)({address:"",latitude:0,longitude:0}),Q=Object(o.a)(q,2),V=(Q[0],Q[1],null),X=[];Object(n.useEffect)(function(){console.log("schoolId",T,I),I.forEach(function(e){console.log("bus",e),X.push(e._id)}),null==V&&(console.log("socket",V),V=y()("https://www.lynx-systems.tk",{transports:["websocket"],jsonp:!1,reconnection:!1})),console.log("socket",V),V.emit("fetchAttendanceFromServer",{schoolId:T}),V.on("returnAttendanceFromServer",function(e){console.log("dataReturnAttendanceFromServer",e),$(e)}),V.emit("sendBusesDataToServer",{schoolId:T,busId:X}),V.on("getBusesLocationFromServer",function(e){console.log("data",e),W(e)})},[]);var ee=function(){var t=Object(i.a)(s.a.mark(function t(){var a,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.prev=1,t.next=4,C.a.post("https://www.lynx-systems.tk/billing/all",{schoolId:e.schoolId});case 4:a=t.sent,n=[],a.data.result.map(function(e){n.push({date:O()(e.date).format("MMMM Do, YYYY"),due:e.slots,package:e.currentPackageName,paid:"$"+e.amount}),A(n)}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:h(!1);case 13:case"end":return t.stop()}},t,null,[[1,9]])}));return function(){return t.apply(this,arguments)}}();function te(){return(te=Object(i.a)(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return P(S.notification),t.next=3,a(d.b.getNotification({schoolId:e.schoolId}));case 3:n=t.sent,P(n);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}Object(n.useEffect)(function(){t({id:e.schoolId}),ee(),function(){te.apply(this,arguments)}()},[]);return c.a.createElement(n.Fragment,null,c.a.createElement(u.a,null,c.a.createElement(E.a,{md:"9"},c.a.createElement(u.a,null,c.a.createElement(E.a,{md:"3"},c.a.createElement("div",{className:"card mb-3 widget-chart"},c.a.createElement("div",{className:" mb-3 widget-chart widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-3 total-number-text Buses-color"},"Buses")))),c.a.createElement("div",{className:"widget-subheading"},"Total"),c.a.createElement("div",{className:"widget-content"},c.a.createElement("div",{className:"icon-wrapper rounded-circle Buses-circle-color"},c.a.createElement("div",{className:"icon-wrapper-bg"}),c.a.createElement("i",{className:"pe-7s-car text-dark"})),c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-4 total-number-text"},e.totalBuses)))))))),c.a.createElement(E.a,{md:"3"},c.a.createElement("div",{className:"card mb-3 widget-chart"},c.a.createElement("div",{className:" mb-3 widget-chart widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-3 total-number-text Drivers-color"},"Drivers")))),c.a.createElement("div",{className:"widget-subheading"},"Total"),c.a.createElement("div",{className:"widget-content"},c.a.createElement("div",{className:"icon-wrapper rounded-circle Drivers-circle-color"},c.a.createElement("div",{className:"icon-wrapper-bg"}),c.a.createElement("i",{className:"pe-7s-users text-dark"})),c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-4 total-number-text"},e.totalDrivers)))))))),c.a.createElement(E.a,{md:"3"},c.a.createElement("div",{className:"card mb-3 widget-chart"},c.a.createElement("div",{className:" mb-3 widget-chart widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-3 total-number-text Parents-color"},"Parents")))),c.a.createElement("div",{className:"widget-subheading"},"Total"),c.a.createElement("div",{className:"widget-content"},c.a.createElement("div",{className:"icon-wrapper rounded-circle Parents-circle-color"},c.a.createElement("div",{className:"icon-wrapper-bg"}),c.a.createElement("i",{className:"pe-7s-users text-dark"})),c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-4 total-number-text"},e.totalParents)))))))),c.a.createElement(E.a,{md:"3"},c.a.createElement("div",{className:"card mb-3 widget-chart"},c.a.createElement("div",{className:" mb-3 widget-chart widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-3 total-number-text Nannies-color"},"Nannies")))),c.a.createElement("div",{className:"widget-subheading"},"Total"),c.a.createElement("div",{className:"widget-content"},c.a.createElement("div",{className:"icon-wrapper rounded-circle Nannies-circle-color"},c.a.createElement("div",{className:"icon-wrapper-bg"}),c.a.createElement("i",{className:"pe-7s-user-female text-dark"})),c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-4 total-number-text"},e.totalNannies))))))))),c.a.createElement(u.a,null,c.a.createElement("div",{className:"col-lg-12"},c.a.createElement(w.a,{className:"main-card mb-3 mt-3"},c.a.createElement("div",{className:"main-wrapper-dashborad"},c.a.createElement(L,{busesLocationArray:J}))))),c.a.createElement(u.a,null,c.a.createElement("div",{className:"col-lg-12"},c.a.createElement(w.a,{className:"main-card mb-3 mt-3"},c.a.createElement(v.a,null,c.a.createElement(g.a,null,c.a.createElement("div",{className:"title"},"Notification")),c.a.createElement(p.a,{className:"scroll"},F&&F.map(function(e){return c.a.createElement(N.a,null,c.a.createElement(f.a,{className:"timeline-title"},e.notificationType),c.a.createElement(b.a,null,e.body))}))))))),c.a.createElement(E.a,{md:"3"},c.a.createElement(E.a,{md:"12"},c.a.createElement("div",{className:"card mb-3 widget-chart"},c.a.createElement("div",{className:" mb-3 widget-chart widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-3 total-number-text Routes-color"},"Routes")))),c.a.createElement("div",{className:"widget-subheading"},"Total"),c.a.createElement("div",{className:"widget-content"},c.a.createElement("div",{className:"icon-wrapper rounded-circle Routes-circle-color"},c.a.createElement("div",{className:"icon-wrapper-bg"}),c.a.createElement("i",{className:"pe-7s-way text-dark"})),c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-4 total-number-text"},J.length,"/",e.totalRoutes)))))))),c.a.createElement(E.a,{md:"12"},c.a.createElement("div",{className:"card mb-3 widget-chart"},c.a.createElement("div",{className:" mb-3 widget-chart widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-3 total-number-text Students-color"},"Students")))),c.a.createElement("div",{className:"widget-subheading"},"Total"),c.a.createElement("div",{className:"widget-content"},c.a.createElement("div",{className:"icon-wrapper rounded-circle Students-circle-color"},c.a.createElement("div",{className:"icon-wrapper-bg"}),c.a.createElement("i",{className:"pe-7s-study text-dark"})),c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-4 total-number-text"},Z,"/",e.totalStudents)))))))),c.a.createElement(E.a,{md:"12"},c.a.createElement("div",{className:"card",style:{borderRadius:"1rem"}},c.a.createElement("div",{className:"m-3 widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-3 total-number-text"},"Chat"))))),c.a.createElement("div",{className:"card m-2",style:{borderRadius:"1rem"}},c.a.createElement("div",{className:"chat-div widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-content",onClick:function(){return k(!0)}},c.a.createElement("div",{className:"mr-2 icon-wrapper rounded-circle",style:{width:45,height:45,backgroundColor:"#2863FF"}},c.a.createElement("div",{className:"icon-wrapper-bg"}),c.a.createElement("i",{className:"pe-7s-signal",style:{color:"white"}})),c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-2 total-number-text",style:{fontWeight:"normal"}},"Broadcast")))))))))),c.a.createElement("div",{className:"card m-2",style:{borderRadius:"1rem"}},c.a.createElement("div",{className:"chat-div widget-chart2 text-left "},c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement(Y.b,{className:"router-link",to:"/chats"},c.a.createElement("div",{className:"widget-content"},c.a.createElement("div",{className:"mr-2 icon-wrapper rounded-circle",style:{width:45,height:45,backgroundColor:"#F29900"}},c.a.createElement("div",{className:"icon-wrapper-bg"}),c.a.createElement("i",{className:"pe-7s-comment",style:{color:"white"}})),c.a.createElement("div",{className:"widget-content-outer"},c.a.createElement("div",{className:"widget-content-wrapper"},c.a.createElement("div",{className:"widget-content-left pr-2 fsize-1"},c.a.createElement("div",{className:"widget-numbers fsize-2 total-number-text",style:{fontWeight:"normal"}},"Direct Message"))))))))))))))),j?c.a.createElement(M.a,{modal:j,toggle:function(){k(!j)}}):null)}),H=a(204),J=a(205),W=a(202);t.default=function(e){var t=e.match;return c.a.createElement(n.Fragment,null,c.a.createElement(W.a,null),c.a.createElement(H.a,null),c.a.createElement("div",{className:"app-main"},c.a.createElement(J.a,null),c.a.createElement("div",{className:"app-main__outer"},c.a.createElement("div",{className:"app-main__inner"},c.a.createElement(r.b,{path:"".concat(t.url),component:U})))))}},362:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(5),c=a.n(n),r=a(10),l=a(3),s=(a(8),function(e,t){return function(){var t=Object(r.a)(c.a.mark(function t(a){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.c)({method:"POST",endPoint:"/billing/all",body:{schoolId:e}},l.b.FETCH_BILLING_HISTORY,a);case 3:n=t.sent,console.log(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()})},674:function(e,t,a){},698:function(e,t){},795:function(e,t,a){}}]);
//# sourceMappingURL=19.37e985e2.chunk.js.map